<div class="container-fluid content-inner mt-n5 py-0">
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-12 col-md-4 col-lg-4 col-xl-4">
                            <div class="card card-hover mb-3" data-aos="fade-up" data-aos-delay="500">
                                <div class="card-body text-center p-0 bg-image ">
                                    <!-- Imagen de perfil -->
                                    <img 
                                        src="<%= profileData.imagen ? `/uploads/${profileData.imagen}` : '/images/avatars/avatar-default.png' %>" 
                                        alt="<%= profileData.nombre || 'Usuario' %>" 
                                        class="av-border img-fluid rounded-circle mb-3 mt-5"
                                        style="object-fit: cover; width: 180px; height: 180px;">
                                
                                    <!-- Nombre del usuario -->
                                    <h4 class="card-title mb-3 text-white">
                                        <%= profileData.nombre || 'Nombre no disponible' %> 
                                        <%= profileData.apellido_paterno || '' %> 
                                        <%= profileData.apellido_materno || '' %>
                                    </h4>
                                </div>
                                
                                <hr class="hr-horizontal mb-3">
                                <div class="card-body ms-4 pt-1 p-0 pb-1">
                                    <h5 class="h5 card-title mb-1">Cargo: <span class="badge bg-info fs-5 ms-2">
                                            <%= detalleLaboral.cargo_nombre || "No disponible" %>
                                        </span></h5>
                                </div>
                                <hr class="hr-horizontal mb-3">
                                <div class="iq-timeline0 ms-4 mt-3 d-flex align-items-center justify-content-between position-relative">
                                    <ul class="list-inline p-0 m-0">
                                       <li>
                                          <div class="timeline-dots1 border-primary text-primary">
                                            <svg width="24px" height="64px" viewBox="0 0 500 1374" id="Layer_1" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <style type="text/css"> .st0{fill:#2B79C2;} .st1{fill:#3B4652;} </style> <g> <path class="st1" d="M161.2,471.9c0,13.8,11.1,24.9,24.9,24.9h139.8c13.8,0,24.9-11.2,24.9-24.9v-16.3H161.2V471.9z"></path> <polygon class="st1" points="256,355.3 178.7,260.1 161.2,260.1 161.2,441.6 350.8,441.6 350.8,260.1 333.3,260.1 "></polygon> <path class="st0" d="M164.3,220.1l32.4,40l59.2,73l59.2-73l32.4-40c0.3-0.3,0.5-0.6,0.8-0.9c19-21.6,30.5-50,30.5-81.1 c0-67.9-55-123-122.9-123s-122.9,55.1-122.9,123c0,31.1,11.5,59.4,30.5,81.1C163.8,219.5,164.1,219.8,164.3,220.1z M256,86 c28.8,0,52.1,23.3,52.1,52.1c0,28.8-23.3,52.1-52.1,52.1s-52.1-23.3-52.1-52.1C203.9,109.4,227.2,86,256,86z"></path> </g> </g></svg>
                                          </div>
                                          <h6 class="float-left mb-1 h5">Sector</h6>
                                          <small class="float-right mt-1 mb-3"><%= detalleLaboral.sector || "No disponible" %>
                                          </small>
                                       </li>
                                       <li>
                                          <div class="timeline-dots1 border-primary text-success">
                                            <svg class="icon-20" width="20" viewBox="0 0 32 32" id="OBJECT" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><defs><style>.cls-1{fill:#2B79C2;}</style></defs><title></title><ellipse class="cls-1" cx="16" cy="26.5" rx="15" ry="4.5"></ellipse><path d="M22.83,14.45A1,1,0,0,0,22,14H10a1,1,0,0,0-.83.45,1,1,0,0,0-.09.93l4.61,11.08a2.5,2.5,0,0,0,4.62,0l4.61-11.08A1,1,0,0,0,22.83,14.45Z"></path><circle class="cls-1" cx="16" cy="12" r="11"></circle><circle cx="16" cy="12" r="6"></circle></g>
                                            </svg>
                                          </div>
                                          <h6 class="float-left mb-1">Zona</h6>
                                          <small class="float-right mt-1">Zona número <%= detalleLaboral.zona || "No disponible" %></small>
                                          <div class="d-inline-block w-100">
                                          </div>
                                       </li>
                                       <li>
                                          <div class="timeline-dots1 border-primary text-danger">
                                            <svg class="icon-20" width="20" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><defs><style>.a{fill:none;stroke:#2B79C2;stroke-linecap:round;stroke-linejoin:round;}</style></defs><path class="a" d="M27.5944,5.5948a9.0331,9.0331,0,0,0-9.0331,9.0331c0,7.0693,6.8966,15.5761,8.7032,17.6655a.5577.5577,0,0,0,.7855.055l.0549-.055c1.7831-2.0973,8.5226-10.5962,8.5226-17.6655A9.0331,9.0331,0,0,0,27.5944,5.5948Zm0,12.8548a4.4344,4.4344,0,1,1,4.4344-4.4344v.0113A4.4344,4.4344,0,0,1,27.5944,18.45Z"></path><polyline class="a" points="36.454 16.678 37.629 16.598 42.5 40.607 32.376 42.405 16.461 40.723 5.5 42.405 8.458 17.758 17.447 16.598 18.736 16.662"></polyline><line class="a" x1="17.4467" y1="16.598" x2="16.8049" y2="40.7598"></line><line class="a" x1="32.3758" y1="42.4052" x2="30.6655" y2="28.982"></line></g></svg>
                                          </div>
                                          <h6 class="float-left mb-1">Municipio</h6>
                                          <small class="float-right mt-1"><%= detalleLaboral.municipio || "No disponible" %></small>
                                          <div class="d-inline-block w-100">
                                          </div>
                                       </li>
                                       <li>
                                          <div class="timeline-dots1 border-primary text-primary">
                                             <svg class="icon-20" width="20"  version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 502.648 502.648" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <g> <circle style="fill:#2B79C2;" cx="250.399" cy="91.549" r="58.694"></circle> <path style="fill:#2B79C2;" d="M455.861,253.028l-54.703-11.411c-18.637-3.904-37.037,4.638-46.765,19.824 c-9.448-4.853-19.608-9.038-30.415-12.511v-32.529c0.022-24.612-20.126-44.738-44.651-44.738h-55.933 c-24.655,0-44.716,20.126-44.716,44.738v32.701c-10.699,3.408-20.751,7.593-30.264,12.468 c-9.728-15.251-28.15-23.857-46.809-19.953l-54.747,11.411c-24.03,5.026-39.626,28.862-34.6,52.978l13.741,65.64 c4.983,24.051,28.84,39.647,52.892,34.621l17.321-3.624c8.671,12.813,20.665,24.569,36.023,34.621 c31.989,20.967,74.247,32.529,119.092,32.529c68.617,0,127.721-27.589,154.943-67.215l17.602,3.689 c24.03,5.004,47.887-10.57,52.87-34.621l13.762-65.64C495.508,281.89,479.912,258.054,455.861,253.028z M251.305,447.381 c-40.51,0-78.475-10.203-106.797-28.862c-9.707-6.342-17.753-13.395-24.202-20.945l13.266-2.783 c24.073-5.004,39.669-28.84,34.643-52.913l-12.317-59.018c7.183-3.861,14.733-7.248,22.757-10.138v10.764 c0,24.569,20.104,44.695,44.716,44.695h55.933c24.548,0,44.652-20.147,44.652-44.695v-11.325 c8.175,2.912,15.854,6.256,22.973,10.052L334.439,341.9c-4.983,24.073,10.591,47.909,34.664,52.913l13.395,2.804 C357.52,427.191,308.101,447.381,251.305,447.381z"></path> <circle style="fill:#2B79C2;" cx="443.954" cy="168.708" r="58.694"></circle> <path style="fill:#2B79C2;" d="M70.736,226.172c31.752-6.644,52.029-37.77,45.471-69.501 c-6.687-31.709-37.749-52.072-69.523-45.428c-31.709,6.622-52.072,37.727-45.428,69.458 C7.879,212.453,38.984,232.795,70.736,226.172z"></path> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </g> </g></svg>
                                          </div>
                                          <h6 class="float-left mb-1">Comunidad</h6>
                                          <small class="float-right mt-1"><%= detalleLaboral.comunidad || "No disponible" %></small>
                                          <div class="d-inline-block w-100">
                                          </div>
                                       </li>
                                       <li>
                                          <div class="timeline-dots1 border-primary text-primary">
                                            <svg class="icon-20" width="20" viewBox="0 0 32 32" id="OBJECT" xmlns="http://www.w3.org/2000/svg" fill="#2B79C2" stroke="#2B79C2"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><defs><style>.cls-1{fill:#3B4652;}</style></defs><title></title><path d="M30,10.25,21.75,2A3.34,3.34,0,0,0,17,2L11.23,7.77a1,1,0,0,0-.29.6l-.79,7.1L1.29,24.33A1,1,0,0,0,1,25v5a1,1,0,0,0,1,1H7a1,1,0,0,0,.7-.29l1.66-1.66a1,1,0,0,0,.28-.85l-.22-1.57,1.57.22a1,1,0,0,0,.85-.28l4.72-4.72,7.1-.79a1,1,0,0,0,.6-.29L30,15A3.34,3.34,0,0,0,30,10.25Z"></path><path class="cls-1" d="M1.29,30.71A1,1,0,0,0,2,31H7a1,1,0,0,0,.7-.29l1.66-1.66a1,1,0,0,0,.28-.85l-.22-1.57,1.57.22a1,1,0,0,0,.85-.28l4.7-4.7-6.38-6.38L1.29,24.33A1,1,0,0,0,1,25v5A1,1,0,0,0,1.29,30.71Z"></path><circle class="cls-1" cx="20.8" cy="11.2" r="3.5"></circle></g></svg>
                                          </div>
                                          <h6 class="float-left mb-1">Clave CCT</h6>
                                          <small class="float-right mt-1"> <%= detalleLaboral.clave_cct || "No disponible" %></small>
                                          <div class="d-inline-block w-100">
                                          </div>
                                       </li>
                                    </ul>
                                 </div>
                                <hr class="my-0">
                            </div>

                        </div>

                        <div class="col-12 col-md-8 col-lg-8 col-xl-8">
                            <div class="card" data-aos="fade-up" data-aos-delay="600">
                                <div class="flex-wrap card-header d-flex justify-content-between">
                                </div>
                                <div class="card-body">
                                    <ul class="nav nav-pills mb-3 d-flex justify-content-between align-items-center"
                                        id="pills-tab" role="tablist">
                                        <div class="d-flex">
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link active" id="pills-detalle-tab"
                                                    data-bs-toggle="pill" data-bs-target="#pills-detalle" type="button"
                                                    role="tab" aria-controls="pills-detalle"
                                                    aria-selected="true">Perfil</button>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link" id="pills-historial-tab" data-bs-toggle="pill"
                                                    data-bs-target="#pills-historial" type="button" role="tab"
                                                    aria-controls="pills-historial"
                                                    aria-selected="false">Historial</button>
                                            </li>
                                        </div>
                                    </ul>

                                    
                                    <div class="tab-content" id="pills-tabContent">
                                        <div class="tab-pane fade show active" id="pills-detalle" role="tabpanel"
                                            aria-labelledby="pills-detalle-tab">
                                            <div class="col-md-12 col-lg-12">
                                                <div class="card" data-aos="fade-up" data-aos-delay="600">
                                                    <div class="flex-wrap card-header d-flex justify-content-between">
                                                        <div class="header-title">
                                                            <h4 class="mb-2 card-title">Detalles Personales</h4>
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="mb-3 d-flex profile-media align-items-top">
                                                            <div class="mt-1 profile-dots-pills border-primary"></div>
                                                            <div class="ms-4">
                                                                <h6 class="mb-3 d-inline">Dirección:</h6> <span
                                                                    class="d-inline">
                                                                    <%= profileData.direccion || 'No disponible' %>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="mb-3 d-flex profile-media align-items-top">
                                                            <div class="mt-1 profile-dots-pills border-primary"></div>
                                                            <div class="ms-4">
                                                                <h6 class="mb-3 d-inline">Teléfono:</h6> <span
                                                                    class="d-inline">
                                                                    <%= profileData.telefono || 'No disponible' %>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="mb-3 d-flex profile-media align-items-top">
                                                            <div class="mt-1 profile-dots-pills border-primary"></div>
                                                            <div class="ms-4">
                                                                <h6 class="mb-3 d-inline">Correo:</h6> <span
                                                                    class="d-inline">
                                                                    <%= profileData.correo || 'No disponible' %>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="mb-3 d-flex profile-media align-items-top">
                                                            <div class="mt-1 profile-dots-pills border-primary"></div>
                                                            <div class="ms-4">
                                                                <h6 class="mb-3 d-inline">RFC:</h6> <span
                                                                    class="d-inline">
                                                                    <%= profileData.rfc || 'No disponible' %>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="mb-3 d-flex profile-media align-items-top">
                                                            <div class="mt-1 profile-dots-pills border-primary"></div>
                                                            <div class="ms-4">
                                                                <h6 class="mb-3 d-inline">CURP:</h6> <span
                                                                    class="d-inline">
                                                                    <%= profileData.curp || 'No disponible' %>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="mb-3 d-flex profile-media align-items-top">
                                                            <div class="mt-1 profile-dots-pills border-primary"></div>
                                                            <div class="ms-4">
                                                                <h6 class="mb-3 d-inline">Fecha de Nacimiento:</h6>
                                                                <span class="d-inline">
                                                                    <%= profileData.fecha_nacimiento || 'No disponible'
                                                                        %>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="mb-3 d-flex profile-media align-items-top">
                                                            <div class="mt-1 profile-dots-pills border-primary"></div>
                                                            <div class="ms-4">
                                                                <h6 class="mb-3 d-inline">Edad:</h6> <span
                                                                    class="d-inline">
                                                                    <%= profileData.edad || 'No disponible' %>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <!------------------- Historial de movimientos ------------------>
                                        <div class="tab-pane fade" id="pills-historial" role="tabpanel"
                                        aria-labelledby="pills-historial-tab">
                                       <div class="card">
                                           <div class="card-header d-flex justify-content-between">
                                               <div class="header-title">
                                                   <h4 class="card-title">Historial de Cambios del Docente</h4>
                                               </div>
                                           </div>
                                           <div class="card-body">
                                               <!-- Contenedor con overflow habilitado -->
                                               <div class="overflow-auto" style="max-height: 600px;">
                                                   <div class="iq-timeline0 m-0 d-flex align-items-center justify-content-between position-relative">
                                                       <ul class="list-inline p-0 m-0">
                                                           <!-- Cambio 1: Registro del Docente -->
                                                           <% Object.entries(historiales).forEach(([tabla, datos]) => { %>
                                                               <% if (datos.length > 0) { %>
                                                                   <div class="historial-section">
                                                                       <h5 class="section-title ms-5 mb-3 badge bg-primary" style="font-size: 0.9rem; padding: 10px;">
                                                                           <%= tabla %>
                                                                       </h5>
                                                                       <ul class="list-inline p-0 m-0">
                                                                           <% datos.forEach(dato => { %>
                                                                               <li>
                                                                                   <div class="timeline-dots timeline-dot1 border-primary text-primary"></div>
                                                                                   <h6 class="float-left mb-1">Fecha:</h6>
                                                                                   <small class="float-right mt-1">
                                                                                    <%= dato.fecha 
                                                                                        ? new Date(dato.fecha).toLocaleDateString('es-MX', { 
                                                                                            year: 'numeric', 
                                                                                            month: 'long', 
                                                                                            day: 'numeric' 
                                                                                          }) 
                                                                                        : "Sin fecha" %>
                                                                                </small>
                                                                                
                                                                                   <hr class="hr-horizontal">
                                                                                   <div class="d-inline-block w-100">
                                                                                       <p class="mb-2"><%= dato.vacante || "No especificada" %></p>
                                                                                       <p class="mb-2">Municipio: <%= dato.municipio_sale || "No disponible" %></p>
                                                                                       <p class="mb-2">Clave CCT: <%= dato.cct_sale || "No disponible" %></p>
                                                                                       <p>Observaciones: <%= dato.observaciones || "Sin observaciones" %></p>
                                                                                   </div>
                                                                                   <hr class="hr-horizontal mt-3">
                                                                               </li>
                                                                           <% }) %>
                                                                       </ul>
                                                                   </div>
                                                               <% } %>
                                                           <% }) %>
                                                       </ul>
                                                   </div>
                                               </div>
                                           </div>
                                       </div>
                                   </div>
                                   
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>